<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Product</title>

<style>
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:#f7f5f2;
  color:#111;
}
.container{
  max-width:760px;
  margin:auto;
  padding:40px 20px;
}
.card{
  background:#fff;
  border-radius:18px;
  padding:28px;
  box-shadow:0 10px 25px rgba(0,0,0,.06);
}
h1{
  margin-top:0;
}
a{
  display:inline-block;
  margin-top:18px;
  text-decoration:none;
  font-weight:600;
  color:#fff;
  background:#000;
  padding:10px 18px;
  border-radius:10px;
}
</style>
</head>

<body>
<div class="container">
  <div class="card">
    <h1 id="name"></h1>
    <p id="summary"></p>
    <a href="./index.html">← Kembali</a>
  </div>
</div>

<script type="module">
import { db } from "./firebase-public.js";
import {
  collection,
  getDocs,
  query,
  where
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const params = new URLSearchParams(window.location.search);
const slug = params.get("slug");

if (!slug) {
  document.body.innerHTML = "Produk tidak ditemukan.";
}

const q = query(
  collection(db, "products"),
  where("slug", "==", slug),
  where("status", "==", "active")
);

const snap = await getDocs(q);

if (snap.empty) {
  document.body.innerHTML = "Produk tidak ditemukan.";
} else {
  const data = snap.docs[0].data();
  document.getElementById("name").textContent = data.name;
  document.getElementById("summary").textContent = data.summary || "";
  document.title = data.name + " – AI Tools Library";
}
</script>
</body>
</html>
